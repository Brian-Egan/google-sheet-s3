<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <?!= include('Stylesheet'); ?>
  </head>
  <body>

    <form onsubmit="handleSubmit(); return false">
      <ul>
        <li>
          <label for="bucket-name">Bucket name</label>
          <input id="bucket-name" name="bucketName" type="text" autofocus value="<?!= bucketName ?>" placeholder="my-bucket-name" required />
        </li>

        <li>
          <label for="path">Path (without leading or trailing slashes)</label>
          <input id="path" name="path" type="text" value="<?!= path ?>" placeholder="path/to/folder" />
        </li>

        <? if (awsAccessKeyId) { ?>
          
        <? } else  { ?>
          <li>
            <label for="aws-access-key-id">AWS access key ID</label>
            <input id="aws-access-key-id" name="awsAccessKeyId" type="password" value="<?!= awsAccessKeyId ?>" placeholder="from AWS management console" required />
          </li>
        <? } ?>

         <? if (awsSecretKey) { ?>
          
        <? } else  { ?>
          <li>
            <label for="aws-secret-key">AWS secret key</label>
            <input id="aws-secret-key" name="awsSecretKey" type="password" value="<?!= awsSecretKey ?>" placeholder="from AWS management console" required />
          </li>
        <? } ?>

        

        
        <li class="file_format">
          <label for="file_format">File format</label>
            <ul>
              <li>
                <input id="file_format" name="file_format" type="radio" value="csv"> CSV 
              </li>
              <li>
                <input id="file_format" name="file_format" type="radio" value="json"> JSON
              </li>
            </ul>
        </li>

      </ul>

      <div class="action-buttons">
        <button type="submit" class="primary" onclick="google.script.run.configS3Creds()">Add S3 Credentials</button>
        <button type="submit" class="primary">Save</button>
      </div>

      <p class="sheet-id"> Sheet ID: <?!= sheetId ?></p>

    </form>

    <script>

      function handleSubmit() {
        var form = document.querySelector('form');
        var submitButton = document.querySelector('form button[type=submit]');
        submitButton.classList.add('loading');
        submitButton.innerHTML = 'Saving...';
        google.script.run.updateConfig(form);
      }

    </script>

  </body>
</html>
